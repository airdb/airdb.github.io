(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{224:function(e,n,t){"use strict";t.r(n);var r=t(0),o=Object(r.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[e._v("#")]),e._v(" Nginx")]),e._v(" "),t("h2",{attrs:{id:"公共配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#公共配置"}},[e._v("#")]),e._v(" 公共配置")]),e._v(" "),t("p",[e._v("说明：\nconf/nginx.conf 中存放在公共配置中，\nconf.d/upstream.conf 中存放upstream配置，\nconf.d/host.conf 中存放 location 等其他配置。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# For more information on configuration, see:\n#   * Official English Documentation: http://nginx.org/en/docs/\n#   * Official Russian Documentation: http://nginx.org/ru/docs/\n\nworker_processes auto;\nerror_log logs/error.log;\npid run/nginx.pid;\n\n# Load dynamic modules. See /usr/share/nginx/README.dynamic.\n# include /usr/share/nginx/modules/*.conf;\n\nevents {\n    worker_connections 2048;\n}\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  '$remote_addr - $host [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n    log_format  main '$time_iso8601|$status|$remote_addr|$host|$server_port|$server_protocol|$request_method|$host$request_uri|$request_filename|$content_type|$bytes_sent|$body_bytes_sent|$request_time|$http_user_agent|$http_Tencent_LeakScan|$upstream_addr|$http_referer';\n    error_log logs/error.log;\n\n    keepalive_timeout  30;\n\n    server_names_hash_max_size 512;\n    server_names_hash_bucket_size 128;\n\n    server_tokens off;\n    sendfile       on;\n    tcp_nopush     off;\n    tcp_nodelay    on;\n    #keepalive_timeout  3 10;\n    client_max_body_size  8m;\n    client_header_timeout 30;\n    client_body_timeout   30;\n    send_timeout   30;\n    #fastcgi_connect_timeout 300;\n    #fastcgi_send_timeout 300;\n    #fastcgi_read_timeout 300;\n    fastcgi_buffer_size 64k;\n    fastcgi_buffers 8 64k;\n    fastcgi_busy_buffers_size 128k;\n    fastcgi_intercept_errors  on;\n\n    gzip  on;\n    gzip_min_length             1024;\n    gzip_buffers                4 8k;\n    gzip_http_version           1.0;\n    gzip_comp_level             1;\n    gzip_vary on;\n    gzip_types   text/plain text/css application/x-javascripts text/xml application/xml application/xml+rss text/javascript;\n\n    proxy_next_upstream error timeout invalid_header http_500 http_503;\n    proxy_set_header   Host             $host;\n    proxy_set_header   X-Real-IP        $remote_addr;\n    proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;\n    proxy_intercept_errors on;\n    proxy_redirect off;\n    port_in_redirect off;\n\n    # Load modular configuration files from the /etc/nginx/conf.d directory.\n    # See http://nginx.org/en/docs/ngx_core_module.html#include\n    # dor more information.\n    include conf.d/*.conf;\n\n    ipip_db /data/app/nginx/modules/17monipdb.datx 60m;\n    ipip_parse_ip $remote_addr;\n    # ipip_parse_ip $http_x_forwarded_for;\n    proxy_set_header ip $http_x_forwarded_for;\n    proxy_set_header country_code $ipip_country_code;\n    proxy_set_header country $ipip_country_name;\n    proxy_set_header province $ipip_region_name;\n    proxy_set_header city $ipip_city_name;\n    proxy_set_header owner $ipip_owner_domain;\n    proxy_set_header isp $ipip_isp_domain;\n    proxy_set_header idc $ipip_idc;\n    proxy_set_header latitude $ipip_latitude;\n    proxy_set_header longitude $ipip_longitude;\n}\n")])])])])}),[],!1,null,null,null);n.default=o.exports}}]);